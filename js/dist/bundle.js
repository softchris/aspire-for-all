(()=>{"use strict";var t={197:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DistributedApplication=void 0;const i=r(838),s=r(689);e.DistributedApplication=class{constructor(t){this.projects=[],this.projects=t}static CreateBuilder(t){return new i.DistributedApplicationBuilder(t)}Run(){let t=s.ManifestHelper.ReadManifest(this.projects),e=JSON.stringify(t,null,2);return s.ManifestHelper.WriteManifest(e,"../out/aspire.json"),e}}},838:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DistributedApplicationBuilder=void 0;const i=r(186),s=r(197);e.DistributedApplicationBuilder=class{constructor(t){this.args=t,this.projects=[]}AddProject(t,e,r){let s=new i.DistributedProject(t,e,r);return this.projects.push(s),s}Build(){return new s.DistributedApplication(this.projects)}}},186:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DistributedProject=void 0,e.DistributedProject=class{constructor(t,e,r){this.name=t,this.projectType=e,this.sourcePath=r,this.projects=[],this.externalHttpEndpoints=!1,this.publishAsDocker=!1,this.type="project.v0"}WithExternalHttpEndpoints(){return this.externalHttpEndpoints=!0,this}WithHttpEndpoint(t,e){return this}WithReference(t){return this.projects.push(t),this}WithEnvironment(t,e){return this}PublishAsDockerFile(){return this.publishAsDocker=!0,this.type="dockerfile.v0",this}}},423:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JsonBuilder=void 0,e.JsonBuilder=class{constructor(){this.json={},this.current=null}AddProperty(t,e){return null==this.current?this.json[t]=e:this.current[t]=e,this}Itr(t){return null==this.current?this.current=this.json[t]:this.current=this.current[t],this}ResetItr(){return this.current=null,this}Build(){return this.json}}},689:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ManifestHelper=void 0;const i=r(896),s=r(928),n=r(423),o=r(595);e.ManifestHelper=class{static WriteManifest(t,e){const r=(0,s.resolve)(__dirname,e);(0,i.mkdirSync)((0,s.dirname)(r),{recursive:!0}),(0,i.writeFileSync)(r,t)}static ReadManifest(t){const e=new n.JsonBuilder;let r=8e3;return t.forEach((t=>{e.AddProperty(t.name,{type:t.type,env:{},bindings:{}}),t.projectType==o.ProjectType.Dotnet?(e.Itr(t.name).Itr("env").AddProperty("OTEL_DOTNET_EXPERIMENTAL_OTLP_EMIT_EXCEPTION_LOG_ATTRIBUTES","true").AddProperty("OTEL_DOTNET_EXPERIMENTAL_OTLP_EMIT_EVENT_LOG_ATTRIBUTES","true").AddProperty("OTEL_DOTNET_EXPERIMENTAL_OTLP_RETRY","in_memory").AddProperty("ASPNETCORE_FORWARDEDHEADERS_ENABLED","true").ResetItr(),e.Itr(t.name).AddProperty("path",t.sourcePath).ResetItr()):t.projectType==o.ProjectType.Javascript&&t.publishAsDocker&&e.Itr(t.name).AddProperty("path",`${t.sourcePath}/Dockerfile`).AddProperty("context",t.sourcePath).ResetItr(),t.externalHttpEndpoints&&(console.log("External Http Endpoints"),t.projectType==o.ProjectType.Dotnet?(console.log("Dotnet Project"),e.Itr(t.name).Itr("bindings").AddProperty("http",{scheme:"http",protocol:"tcp",transport:"http"}).AddProperty("https",{scheme:"https",protocol:"tcp",transport:"http"}).ResetItr()):t.projectType==o.ProjectType.Javascript&&(console.log("Other Project"),e.Itr(t.name).Itr("bindings").AddProperty("http",{scheme:"http",protocol:"tcp",transport:"http",targetPort:r++,external:!0}).ResetItr()));for(let r=0;r<t.projects.length;r++){let i=t.projects[r];e.Itr(t.name).Itr("env").AddProperty(`services__${i.name}__http__0`,`{${i.name}.bindings.http.url}`).ResetItr()}})),e.Build()}}},595:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectType=void 0,function(t){t[t.Dotnet=0]="Dotnet",t[t.Java=1]="Java",t[t.Python=2]="Python",t[t.Javascript=3]="Javascript"}(r||(e.ProjectType=r={}))},896:t=>{t.exports=require("fs")},928:t=>{t.exports=require("path")}},e={};function r(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,r),n.exports}(()=>{const t=r(197),e=r(595);let i=process.argv.slice(2);var s=t.DistributedApplication.CreateBuilder(i),n=s.AddProject("weatherapi",e.ProjectType.Dotnet,"../AspireJavaScript.MinimalApi").WithExternalHttpEndpoints();s.AddProject("svelte",e.ProjectType.Javascript,"../AspireJavaScript.Svelte").WithReference(n).WithHttpEndpoint("env","PORT").WithExternalHttpEndpoints().PublishAsDockerFile(),s.AddProject("angular",e.ProjectType.Javascript,"../AspireJavaScript.Angular").WithReference(n).WithHttpEndpoint("env","PORT").WithExternalHttpEndpoints().PublishAsDockerFile(),s.AddProject("react",e.ProjectType.Javascript,"../AspireJavaScript.React").WithReference(n).WithEnvironment("BROWSER","none").WithHttpEndpoint("env","PORT").WithExternalHttpEndpoints().PublishAsDockerFile(),s.AddProject("vue",e.ProjectType.Javascript,"../AspireJavaScript.Vue").WithReference(n).WithHttpEndpoint("env","PORT").WithExternalHttpEndpoints().PublishAsDockerFile(),s.Build().Run()})()})();